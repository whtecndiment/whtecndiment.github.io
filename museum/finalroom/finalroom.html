<!DOCTYPE html>
<html lang="en">
  <head>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jomolhari&family=Rubik+Iso&display=swap" rel="stylesheet">

    <title>????</title>
    <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>

    <script>
     
    AFRAME.registerComponent("statue", {
      init: function() {
        this.el.addEventListener("click", (e) => {
          speechPopup.showModal()
        })
      }
    })

    AFRAME.registerComponent("leave", {
      init: function() {
        this.el.addEventListener("click", (e) => {
          exitPopup.showModal()
        })
      }
    })

    </script>

  </head>

  <style>
    .popup {
      top: 65%;
      width: 800px;
      height: 250px;
      border-style: groove;
      background-color: rgb(24, 24, 24);
    }

    .exit {
      top: 65%;
      width: 1200px;
      height: 250px;
      border-style: groove;
      background-color: rgb(24, 24, 24);
    }

    .leave {
      font-family: 'Jomolhari', serif;
      font-family: 'Rubik Iso', cursive; 
      float: right; 
      font-size: 25px; 
      margin-right: 75px; 
      margin-top: 40px;
      color:aliceblue; 
      background-color: rgb(24, 24, 24); border: none; cursor: pointer;
    }
  </style>

  <body>

    <dialog id="speech-popup" class="popup">
      <p style="font-family: 'Jomolhari', serif;font-family: 'Rubik Iso', cursive;
                text-align: center; font-size: 50px; color:rgb(163, 4, 163); position:relative; bottom: 5%; ">"This is not for you."</p>
      <p style="font-family: 'Jomolhari', serif;font-family: 'Rubik Iso', cursive;
                text-align: center; font-size: 30px; color:red; position:relative; bottom: 15%; ">"PLEASE LEAVE"</p>
      <form method="dialog">
        <button value="continue" style="font-family: 'Jomolhari', serif;
                      font-family: 'Rubik Iso', cursive; float: right; font-size: 20px; margin-right: 25px; margin-bottom: 100px;
                      color:aliceblue; background-color: rgb(24, 24, 24); border: none; cursor: pointer;">CONTINUE</button>
      </form>
    </dialog>

      <dialog id="exit-popup" class="exit">
        <p style="font-family: 'Jomolhari', serif;font-family: 'Rubik Iso', cursive; 
                  font-size: 50px; text-align: center; color:rgb(163, 4, 163)">"Please leave. This is for your own good."</p>
        <form method="dialog">
          <button class="leave" value="leave">LEAVE</button>
        </form>
      </dialog>

    <a-scene>
      <a-box  material="transparent: true; depthTest: false" opacity="0" position="0.1 1.5 -4.5" scale="0.35 1.1 0.5" width="2.25" depth="2" height="5"
        statue></a-box>

      <a-entity camera position="0 0 0" look-controls wasd-controls="acceleration: 8" fov="50">
        <a-cursor fuse="true" fuseTimeout="500" opacity="0.5" color="white"></a-cursor>  
      </a-entity>
            <a-entity light="type: directional; color: purple; intensity: 2" position="0 3 -3"></a-entity>
            <a-entity light="type: spot; color: purple; intensity: 1" position="0 3 2"></a-entity>
            <a-entity light="type: spot; color: purple; intensity: 1" position="0 10 2"></a-entity>
            <a-entity light="type: ambient; color: red; intensity: 1" position="5 3 -2"></a-entity>
            <a-entity light="type: ambient; color: red; intensity: 1" position="5 3 2"></a-entity>
            <a-entity light="type: spot; color: purple; intensity: 2" rotation="0 45 0" position="0 0 0"></a-entity>
            <a-entity light="type: spot; color: purple; intensity: 2" rotation="0 -45 0" position="0 0 0"></a-entity>

			<a-entity id="lies" gltf-model="final.gltf" scale="1.1 1.1 1.1" position="0 -1 -4.5" rotation="0 90 0"></a-entity>

      <a-box position="0 0 3" width="1.5" depth="0.20" height="3" color="white" ></a-box>
      <a-box  material="transparent: true; depthTest: false" opacity="0" position="0.1 1.5 3" scale="1.35 1.1 0.5" width="2.25" depth="2" height="5"
        leave></a-box>
            
      <a-sky color="black"></a-sky>
    </a-scene>
  </body>

<script>
  var lies = document.querySelector('#lies');
       lies.addEventListener('fusing', function (evt) {
         evt.target.setAttribute('animation', 'property: scale; to: 0 0 0; dur: 1000; easing: linear; loop: false');
       });
</script>

<script>
const speechPopup = document.querySelector('#speech-popup')
const exitPopup = document.querySelector('#exit-popup')

exitPopup.addEventListener('close', (e) => {
    if (exitPopup.returnValue === 'leave') {
      location.replace('http://localhost/museum/ending.html')
    }
  })


</script>

</html>
